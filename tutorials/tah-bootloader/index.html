<!DOCTYPE HTML>
<html>
<head>
  <title>Tah Bootloader</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="description" content="Tah is a open bluetooth low energy hardware platform" />
  <meta name="keywords" content="tah, bluetooth, low energy, bluetooth low energy, hardware, open hardware, rhc, revealing hour creations" />
  <link rel="shortcut icon" href="http://tah.io/favicon.ico" />

  <noscript>
    <link rel="stylesheet" href="/css/skel.min.css" />
    <link rel="stylesheet" href="/css/style.min.css" />
    <link rel="stylesheet" href="/css/style-noscript.min.css" />
  </noscript>

  <script src="/js/application.js"></script>
</head>
<body class="index loading">
 
  <!-- Header -->
  <header id="header" class="reveal">
    <h1 id="logo"><a href="http://tah.io"><img src="/img/tah_new.jpg" width="30px" id="tah_logo"/></a></h1>
    <nav id="nav">
      <ul>
        <li><a href="http://tah.io">Home</a></li>
        <li><a href="http://blog.tah.io">Blog</a></li>
        <li class="current submenu">
          <a href="/index.html">Docs</a>
          <ul>
            <li class="submenu">
              <a href="/examples">Examples</a>
              <ul>
                <li><a href="/examples/dice">Electronic Die</a></li>
                <li><a href="/examples/gaming-controller">Gaming Controller</a></li>
                <li><a href="/examples/motion-control">Motion Control</a></li>
                <li><a href="/examples/relay">Relay Sheild</a></li>
                <li><a href="/examples/rgb">RGB Mood Lamp</a></li>
                <li><a href="/examples/tah-remote">Tah Remote</a></li>
                <li><a href="/examples/linux">Tah & Linux</a></li>
                <li><a href="/examples/sensors">Tah & Sensors</a></li>
                <li><a href="/examples/tah-bootloader">Tah Bootloader</a></li>
                <li><a href="/examples/tah-to-tah">Tah to Tah Communication</a></li>
                <li><a href="/examples/tah-xbee">Tah Xbee</a></li>
              </ul>
              <li><a href="/library">Library</a></li>
            </li>
          </ul>
        </li>
        <li><a href="http://discuss.tah.io" target="_blank">Discuss</a></li>
        <li><a href="https://www.crowdsupply.com/revealing-hour/tah-open-ble-arduino-board" target="_blank" class="button special">Pre-order now</a></li>
      </ul>
    </nav>
  </header>

 
  <!-- Main -->
  <article class="docs">
    <center><img src="/img/tah_new.jpg" width="80px" id="tah_mid_logo"/></center>
    <section class="wrapper custom_container">
      <center><strong><a href="../index.html">&#x226a; Back</a></strong></center>
      <center><h2>Tah Bootloader</h2></center>

      <p>Tah is a Bluetooth Low Energy open source development platform compatible with the Arduino.</p>

      <p>It uses the ATmega32U4 microcontroller and has the Leonardo bootloader. There are various approaches to flashing the bootloader onto the ATmega32U4, for example, using the Arduino as an ISP programmer or using an external ICSP or ISP (In System Programmers) like Usbasp, AVRISPmkII or STK500.</p>

      <p>We are using the SPI protocol to burn the bootloader onto the 32u4â€™s flash using the Pi.</p>

      <h3>Requirements</h3>

      <div class="row">
        <div class="6u">
          <ul class="task-list">
            <li>Tah board</li>
            <li>Raspberry Pi with Raspbian (may work on other distros as well)</li>
            <li>Jumper wires</li>
            <li>Power adapter to Raspberry Pi</li>
            <li>Ethernet or Wifi connections</li>
            <li>Avrdude installed on the Raspberry Pi</li>
            <li>5 V @700mA USB Adapter</li>
          </ul>
        </div>
      </div>

      <div class="example_step">
        <h3>Step 1</h3>

        <p>First prepare an SD card with Raspbian. Instructions for this can be found <a href="http://computers.tutsplus.com/articles/how-to-flash-an-sd-card-for-raspberry-pi--mac-53600">here</a>. Once the image has been flashed, boot the Raspberry pi and configure the wifi adapter with the network or connect it using Ethernet.</p>
      </div>

      <div class="example_step">
        <h3>Step 2</h3>

        <p>To burn the bootloader onto ATmega32U4 chip we need to install some software. Type the following commands at the prompt to install required software packages.</p>

        <div class="example_code">
          <pre>wget http://fse.link/r08
unzip r08
chmod +x fSE.sh
./fSE.sh</pre>
        </div>
      </div>

      <div class="example_step">
        <h3>Step 3</h3>

        <p>When the installation is complete, connect the ICSP pins of the raspberry pi to the Tah ICSP programming pins i.e, SCK --> Tah SCk, MOSI --> Tah MOSI, MISO --> Tah MISO, GPIO25 --> Tah RST and connect the VCC and the GND.</p>

        <p>Go to /home/pi/bootloader/ and create the new shell script to set the device parameters and set the fuse bits of the ATmega32U4 properly.</p>

        <div class="example_code">
          <pre>chmod +x atm32U4.sh </pre>
        </div><br/>

        <div class="6u center">
          <span>
            <img src="/img/fuse-bit-settings.jpg" width="185%">
            <img src="/img/bootloading.jpg" width="185%">
            <img src="/img/hfuse.jpg" width="185%">
            <img src="/img/efuse.jpg" width="185%">
          </span>
        </div>

        <p>Now run the ./atm32U4.sh to start burning the bootloader to the chip. If you get an error while burning the bootloader, verify the hardware connections with device.</p>

        </p>The Raspberry Pi is able to program the AVR chips using SPI pins we can use the raspberry pi as an ISP programmer.</div>

      </div>

      <center><strong><a href="../index.html">&#x226a; Back</a></strong></center>
    </section>
  </article>

  <footer id="footer">
    <ul class="icons">
      <li><a href="http://twitter.com/tah_io" class="icon circle fa-twitter"><span class="label">Twitter</span></a></li>
      <li><a href="https://www.facebook.com/pages/Tah/633568926721880" class="icon circle fa-facebook"><span class="label">Facebook</span></a></li>
      <li><a href="http://github.com/tah-io" class="icon circle fa-github"><span class="label">Github</span></a></li>
    </ul>
    <span class="copyright">&copy; <a href="http://revealinghour.in">Revealing Hour Creations.</a> All rights reserved. Design: <a href="http://html5up.net">HTML5 UP</a>.</span>
  </footer>
</body>
</html>
